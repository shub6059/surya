(function(b){"use strict";var a={init:function(){if(!reset_pass_obj.form_selector)return;this.insertAlertBox(),a.Select=reset_pass_obj.form_selector,a.loginInputName=reset_pass_obj.login_input_name,a.mobileLength=reset_pass_obj.ihs_mobile_length,a.countryCode=reset_pass_obj.country_code,a.Selector=a.buildFormSelector(),a.addRequiredInputFields(),a.bindEvents()},insertAlertBox:function(){b('body').append('<div id="oc-alert-container"></div>')},showAlert:function(d,a){a=a||'#3089cf',b('.oc-alert-pop-up').remove();var e=document.querySelector('#oc-alert-container'),f='#23282d'===a?'✔':'ⓘ',c='<div class="oc-alert-pop-up"><div class="oc-alert-pop-up-message"><span class="oc-i-icon-pop-up">'+f+'</span>'+d+'</div>'+'<div class="oc-alert-pop-up-close" style="background: '+a+' !important" >'+reset_pass_obj.wpml_messages.ok+'</div>'+'</div>';b(c).css('background',a),b(e).html(c),b('.oc-alert-pop-up-close').on('click',function(a){b('.oc-alert-pop-up').fadeOut()})},buildFormSelector:function(){a.userFormSelector=reset_pass_obj.form_selector,a.loginInputName=reset_pass_obj.login_input_name;var c=a.userFormSelector+' input[name="'+a.loginInputName+'"]';return a.formElement=b(c).parents('form'),a.formElement.length&&a.formElement.addClass('ihs_log_form'),a.formSelector='form.ihs_log_form',a.formSelector},addRequiredInputFields:function(){a.resetPassLink='<a class="ihs-otp-password-reset-link btn" href="javascript:void(0)">'+reset_pass_obj.wpml_messages.reset_password+'</a>',b(a.Selector).append(a.resetPassLink)},bindEvents:function(){b('.ihs-otp-password-reset-link').on('click',function(){var c,d,e=a.countryCode&&'ALL'!==a.countryCode?'+'+a.countryCode:'',f=e?'readonly':'',g;a.countryCode||(a.countryCode='+91'),g='<br><label id="ihs-otp-reset-pass-input"> '+reset_pass_obj.wpml_messages.mobile_no_required+'<br>\n'+'<div id="ihs-country-code" class="ihs-country-code-exis-mob">'+'<div class="ihs-country-inp-wrap">'+'   <input type="text" name="'+'ihs-country-code'+'" value="'+e+'" class="wpcf7-form-control ihs-country-code ihs-reset-country-code" required placeholder="e.g. +91" aria-invalid="false" '+f+' maxlength="5">'+'</div>'+'</div>'+'<div>'+'<input type="number" name="ihs-otp-reset-pass-input" value="" class="ihs-otp-reset-pass-input" aria-required="true" aria-invalid="false">'+'</div>'+'</label>',c='<div class="ihs-otp-send-pass-btn" id="ihs-otp-send-pass-btn">'+reset_pass_obj.wpml_messages.send_new_password+'</div>',d=g+c,b(a.Selector).append(d),b('.ihs-otp-password-reset-link').remove()}),b(a.Selector).on('click','.ihs-otp-send-pass-btn',function(){var c=b('.ihs-otp-reset-pass-input').val(),d,f=b('.ihs-reset-country-code'),e=f.val(),g=parseInt(reset_pass_obj.ihs_mobile_length,10),h=!!(a.countryCode&&'ALL'===a.countryCode)||'',i=[];d=a.mobileAndCountryCodeValidation(c,h,g,e,i),d||a.sendNewPassAjaxRequest(c,e)})},mobileAndCountryCodeValidation:function(c,e,d,f,b){if(c||b.push(reset_pass_obj.wpml_messages.alerts.enter_mobile_no),c&&!e&&(d&&d!==c.length&&b.push(reset_pass_obj.wpml_messages.alerts.enter_crt_mobile_no),!d&&c.length<5&&b.push(reset_pass_obj.wpml_messages.alerts.enter_crt_mobile_no)),f||b.push(reset_pass_obj.wpml_messages.alerts.enter_country_code),b.length){var g=b.join('</br>');a.showAlert(g,'#B93A32')}return b.length},sendNewPassAjaxRequest:function(c,d){a.showAlert(reset_pass_obj.wpml_messages.alerts.sending_new_pass,'#23282d'),b('#ihs-otp-send-pass-btn').hide();var e=b.post(reset_pass_obj.ajax_url,{action:'ihs_otp_reset_ajax_hook',security:reset_pass_obj.ajax_nonce,data:{mob:c,country_code:d}});e.done(function(c){c.data.is_error==!1?(a.showAlert(reset_pass_obj.wpml_messages.alerts.new_pass_sent,'#23282d'),b('#ihs-otp-reset-pass-input').hide(),b('#ihs-otp-send-pass-btn').hide()):a.showAlert(c.data.error_msg,'#B93A32')})}},c='form'+reset_pass_obj.form_selector;b(c)&&a.init()})(jQuery)